# 02.catkin_make&catkin_tool实战

## catkin_make

### 单独编译某些package

```bash
$ catkin_make -DCATKIN_WHITELIST_PACKAGES="package1;package2"
# 等价于：
$ catkin_make --only-pkg-with-deps
# 撤销白名单设置
$ catkin_make -DCATKIN_WHITELIST_PACKAGES=""
```

---

**NOTE**

屏蔽某些包被编译可以创建一个名为[CATKIN_IGNORE](https://github.com/tier4/velodyne_vls/tree/tier4/master/velodyne_msgs)的文件到这些包所在的目录下

---

### 使用ninja编译

```bash
$ catkin_make --use-ninja
```

---
**REMARK**

`catkin_make`用`ninja`编译速度会快些，但对报错信息没有语法高亮，很影响调试

---

## [catkin build](https://catkin-tools.readthedocs.io/en/latest/index.html)

### [安装catkin build](https://catkin-tools.readthedocs.io/en/latest/installing.html)

### 编译

- 跳过对某些已编译包的编译（实际上只是检查）

  ````bash
  $ catkin build --start_with <pkg>
  ````

<img src="https://natsu-akatsuki.oss-cn-guangzhou.aliyuncs.com/img/dIW8tcn1J6m2KYLp.png!thumbnail" alt="img" style="zoom:67%;" />

- 配置编译参数

  ```bash
  $ catkin config -DPYTHON_EXECUTABLE=/opt/conda/bin/python3 \
  -DPYTHON_INCLUDE_DIR=/opt/conda/include/python3.8 \
  -DPYTHON_LIBRARY=/opt/conda/lib/libpython3.8.so
  # 使用catkin_make参数
  $ catkin config --catkin-make-args [args]
  ```

- 配置黑白名单

  ```bash
  # 配置白名单（或黑名单）
  $ catkin config --whitelist/blacklist <pkg>
  # 取消白名单配置
  $ catkin config --no-whitelist  
  ```

- 追加和移除而非覆盖配置参数

```bash
# 追加配置参数
$ catkin config -a <配置参数>
# 移除配置参数
$ catkin config -r <配置参数>
```

- 编译当前文件夹下的`package`

```bash
$ catkin build --this
```

### 清理编译产物

```bash

# 指定删除某个package
$ catkin clean <package_name>
# 删除所有 product 
$ catkin clean --deinit
# 移除非src文件夹下的包的编译产物 
$ catkin clean --orphans
```

---

**NOTE**

`catkin clean`默认删除`devel`、`log`等目录，但隐藏目录 `.catkin_tools` , `.catkin_workspace` 不会清除

---

### [配置文档](https://catkin-tools.readthedocs.io/en/latest/verbs/catkin_profile.html)

catkin build可以设置配置文档profile

---

**REMARK**

尚未明晰可用的场景

---











