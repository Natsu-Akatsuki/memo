# 03.git commith和push相关操作

## 压缩commit记录

为减小git仓的大小、去冗余、让commit记录更漂亮

## 修改message (of last commit)

- 当本地文件内容 = 暂存区内容 = 本地仓内容时

``` bash
$ git commit --amend -m "<修改后的message>"
```

- pycharm IDE中的实现：

  <img src="https://natsu-akatsuki.oss-cn-guangzhou.aliyuncs.com/img/image-20210209114613082.png" alt="image-20210209114613082" style="zoom: 67%;" />



## 覆写远程服务器上的git仓（暴力解决方案）

- 在本地修正完本地仓的历史后，强制将本地仓的历史覆写到远程仓中

```bash
$ git push -f 
```

## 选择性地挑选文件的changes进行commit

- for pycharm：

![image-20210222010451820](https://natsu-akatsuki.oss-cn-guangzhou.aliyuncs.com/img/image-20210222010451820.png)

## 版本回溯

```bash
# 回溯到对应的commit
$ git reset [option] [commit_id]
--soft  ：同步HEAD
--mixed ：同步HEAD和INDEX区
--hard  ：同步HEAD、INDEX和工作空间
```

<img src="https://natsu-akatsuki.oss-cn-guangzhou.aliyuncs.com/img/image-20210827192811107.png" alt="image-20210827192811107" style="zoom: 80%;" />

## 删除文件

```bash
# 删除文件在暂存区和工作区的相关文件和文件夹
$ git rm <文件/文件夹>
# 只删除其在暂存区的相关文件和文件夹
$ git rm --cached <文件/文件夹>
```

---
**NOTE**

1. `git rm`只能删除已在暂存区的文件

---