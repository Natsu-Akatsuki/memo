.. role:: raw-html-m2r(raw)
   :format: html


06. 文件和文件夹管理
====================

`文件夹跳转 <https://github.com/gsamokovarov/jump>`_
--------------------------------------------------------

jump
^^^^

一般都是跳转到使用次数最多的文件夹


* 安装(for ubuntu)

.. prompt:: bash $,# auto

   $ wget https://github.com/gsamokovarov/jump/releases/download/v0.40.0/jump_0.40.0_amd64.deb && sudo dpkg -i jump_0.40.0_amd64.deb
   $ echo 'eval "$(jump shell)"' >> ~/.bashrc

文件查看
--------

batcat
^^^^^^

相当于带语法高亮的cat


* 安装

.. prompt:: bash $,# auto

   $ sudo apt install catbat


* 配置

.. prompt:: bash $,# auto

   $ echo 'alias bat="batcat --paging=auto"' >> ~/.bashrc
   $ echo "export MANPAGER=\"/bin/bash -c 'col -bx | batcat -l man -p'\"" >> ~/.bashrc

----

**REMARK**

给man手册上色的功能很赞，但不建议使用（其不像man一样独享一个窗口，会跟前面的终端输出混在一起），可以使用\ `most <https://www.cyberciti.biz/faq/unix-linux-color-man-pages-configuration/>`_

:raw-html-m2r:`<img src="https://natsu-akatsuki.oss-cn-guangzhou.aliyuncs.com/img/image-20210905011156100.png" alt="image-20210905011156100" style="zoom:67%; " />`

----

解压缩
------

tar
^^^

.. prompt:: bash $,# auto

   # 压缩
   $ tar -czvf <生成的压缩文件名> <待压缩的文件/文件夹>
   # 解压缩
   $ tar -xzvf <解压的文件名> -C <待存放的文件夹路径>

.. list-table::
   :header-rows: 1

   * - option
     - 效果
   * - -C
     - 指定解压缩的目的文件夹
   * - -c
     - create a archive
   * - -f
     - 指定生成的压缩文件名/待解压的文件名
   * - -v
     - list verbose information
   * - -x
     - 解压
   * - -z
     - 使用gzip的支持进行压缩


软链接
------

.. prompt:: bash $,# auto

   $ ln -s <源地址> <目的地>
   # 可以不指定目的地，然后生成软链接到当前目录
   $ ln -s <源地址>

.. attention:: 所有地址都需要绝对路径（实际使用时常跟 `$(pwd)` 配合使用）


文件编辑
--------

文件替换
--------

sed
^^^


* 语法

.. prompt:: bash $,# auto

   sed [OPTION] {script-only-if-no-other-script} [input-file]...

   {script-only-if-no-other-script}
   s/<正则表达式（待替换的内容）>/<替换的内容>/：使用正则表达式进行替换

.. note:: {script-only-if-no-other-script}这部分需要加引号 `''`



* 实例

.. prompt:: bash $,# auto

   # 替换code-block为prompt-block
   $ m2r ${file}&& sed -i -e 's/.. prompt:: bash $,# auto/.. prompt:: bash $,# auto/' ${fileDirname}/${fileBasenameNoExtension}.rst

   # 替换code-block为prompt-block
   # 去掉行首的第一个$ prompt
   $ m2r ${file}&& sed -i -e 's/.. prompt:: bash $,# auto/.. prompt:: bash $/' -e 's/$ //' ${fileDirname}/${fileBasenameNoExtension}.rst

更多可参考\ `此网站(linux hint) <https://linuxhint.com/50_sed_command_examples/>`_

----

**NOTE**


* s加g和不加g的区别：

:raw-html-m2r:`<img src="https://natsu-akatsuki.oss-cn-guangzhou.aliyuncs.com/img/image-20210906081613293.png" alt="image-20210906081613293" style="zoom:50%; " />`

----


* 常用选项

.. list-table::
   :header-rows: 1

   * - option
     - 效果
   * - -i
     - 原地替换 (in-place replacement)
   * - -e
     - command的拼接


内容提取
--------

awk
^^^

cut
^^^

grep
^^^^

获取文件信息
------------

.. prompt:: bash $,# auto

   $ dirname <absolute_file_name>
   $ basename <absolute_file_name>
   # -s <extension> 去后缀
